<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Access-Control-Allow-Origin" content="*" />
    <title>Document</title>
</head>

<body>
    <button id="button">Generate</button>
    <button id="ripple">Ripple</button>
    <button id="bitCore">BitCore</button>
    <button id="liteCore">LiteCore</button>

    <script src="js/polyfill.es6.js"></script>
    <script src="js/basex.js"></script>
    <script src="js/unorm.js"></script>
    <script src="js/jquery-3.2.1.js"></script>
    <script src="js/bootstrap-3.3.7.js"></script>
    <script src="js/levenshtein.js"></script>
    <script src="js/kjua-0.1.1.min.js"></script>
    <script src="js/bitcoinjs-3.3.2.js"></script>
    <script src="js/bitcoinjs-extensions.js"></script>
    <script src="js/bitcoinjs-bip38-2.0.2.js"></script>
    <script src="js/segwit-parameters.js"></script>
    <script src="js/ethereumjs-util.js"></script>
    <script src="js/ripple-util.js"></script>
    <script src="js/casinocoin-util.js"></script>
    <script src="js/bchaddrjs-0.2.1.js"></script>
    <script src="js/nebulas-account.js"></script>
    <script src="js/eos-util.js"></script>
    <script src="js/sjcl-bip39.js"></script>
    <script src="js/wordlist_english.js"></script>
    <script src="js/wordlist_japanese.js"></script>
    <script src="js/wordlist_spanish.js"></script>
    <script src="js/wordlist_chinese_simplified.js"></script>
    <script src="js/wordlist_chinese_traditional.js"></script>
    <script src="js/wordlist_french.js"></script>
    <script src="js/wordlist_italian.js"></script>
    <script src="js/wordlist_korean.js"></script>
    <script src="js/jsbip39.js"></script>
    <script src="js/biginteger.js"></script>
    <script src="js/zxcvbn.js"></script>
    <script src="js/entropy.js"></script>
    <script src="js/stellar-util.js"></script>
    <script src="js/index.js"></script>

    <script src="testJs/WalletCreateManager.js"></script>
    <script src="testJs/common.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.js"></script>
    <script src="js/ripple-1.3.2-min.js"></script>
    <script src="testJs/rippleManager.js"></script>
    <script src="testJs/bitcore-lib.min.js"></script>
    <script src="testJs/bchManager.js"></script>
    <script src="testJs/bchBitBoxBundle.js"></script>
    <script src="testJs/litecore-lib.min.js"></script>
    <script src="testJs/liteCoinManager.js"></script>
    <script>
        // "BCH - Bitcoin Cash":7,
        // "BTC - Bitcoin": 17,
        // "BTC - Bitcoin Testnet": 18,
        // "EOS - EOSIO": 53 ,
        // "ETH - Ethereum": 56,
        // "LTC - Litecoin": 83,
        // "XRP - Ripple": 158,
        function generateClicked() {
            var manager = new WalletCreateManager();
            var words = manager.generate();
            manager.address("under syrup oak method must enrich buyer sister cherry rural obvious kit", "", "XRP - Ripple");
        }

        function rippleTest() {
            var manager = new rippleManager();

            let address = "rJqGsa3Dd5PC8fAcZGzia6BJjk383UBUtx";

            manager.setNetworkIsMainNet(false);

            //获取矿工费
            // manager.getFee().then(fee => {
            //     console.log(fee);
            // });

            //获取账户信息
            // manager.getAccountInfo(address).then(result => {
            //     console.log(result);
            // });


            //获取交易记录
            // manager.getTrans(address, 3, 0);

            //根据secret获取地址
            // manager.deriveAddress("sngugX7wotDp6ZfyamgkGWhCKKFit")

            //判断地址是否正确
            // manager.isValidAddress(address);

            //根据txid获取交易详情
            // manager.getSepecificTransaction("82B921C421EB1FB2C9AF36EC77DEE8AC8D29DB4D2305C35FA5755AB606F1D043").then(result => {
            //     console.log(result);
            // });

            //测试交易
            // manager.requestTransaction("rJqGsa3Dd5PC8fAcZGzia6BJjk383UBUtx", "rswdUBJwu1dug8zTKmVS7fWGMvyoFMd2fH", "0.000013", "0.01", "sngugX7wotDp6ZfyamgkGWhCKKFit", 2);
            // manager.requestTransaction("rswdUBJwu1dug8zTKmVS7fWGMvyoFMd2fH", "rJqGsa3Dd5PC8fAcZGzia6BJjk383UBUtx", "0.000012", "0.03", "ss2mJHyhxCh9aDLRtDfZp2YPvvdUL", 1);
            // manager.requestTransactionWithKeyPair("rswdUBJwu1dug8zTKmVS7fWGMvyoFMd2fH", "rJqGsa3Dd5PC8fAcZGzia6BJjk383UBUtx", "0.000012", "0.01", "00428AE233CDEE1654D4B2B60E90FC9490C04E707B8104160960F9E090A13F4D51", "03CF65A4C7FDF9E324BFCE41318071F3B133ECC70956B746F62F9C14192687DCEA", 1);
            manager.requestTransactionWithKeyPair("rJqGsa3Dd5PC8fAcZGzia6BJjk383UBUtx", "rswdUBJwu1dug8zTKmVS7fWGMvyoFMd2fH", "0.000012", "0.01", "005F34B3034B0B18DCB085BA874B2ED6C47D63AC14E9E58C2A3674DC7EEDD4EEBF", "033D534D10676D46D2FBA81BF4EC86719B2D8C47EDD798D26DE63BEEBF9715E63C", 10);
        }

        function bchTest() {
            var manager = new bchManager();

            // 生成助记词
            let genMen = manager.generateMne();
            console.log("助记词：" + JSON.stringify(genMen.object));

            let testMen = "copy target urge such ice spatial near sheriff cycle dog file twenty";
            //根据助记词生成cash地址
            let getCashAddressFromMen = manager.getCashAddressFromMne(testMen);
            console.log(`助记词为 ${testMen} 的cash地址为 ${getCashAddressFromMen.object}`);

            //根据助记词生成Legacy地址
            let getLegacyAddressFromMen = manager.getLegacyAddressFromMne(testMen);
            console.log(`助记词为 ${testMen} 的Legacy地址为 ${getLegacyAddressFromMen.object}`);

            //根据助记词生成私钥
            let wif = manager.getWif(testMen);
            console.log(`助记词为 ${testMen} 的私钥为 ${wif.object}`);

            //根据私钥获取cash地址
            let getCashAddressFromWif = manager.getCashAddressFromWif(wif.object);
            console.log(`私钥为 ${wif.object} 的cash地址为 ${getCashAddressFromWif.object}`);

            //根据私钥获取Legacy地址
            let getLegacyAddressFromWif = manager.getLegacyAddressFromWif(wif.object);
            console.log(`私钥为 ${wif.object} 的cash地址为 ${getLegacyAddressFromWif.object}`);

            //判断是否测试地址
            let isTestnetAdd = manager.isTestnetAddress(getCashAddressFromMen.object);
            console.log(`地址为 ${getCashAddressFromMen.object} 是否为测试地址 ${isTestnetAdd.object}`);

            //判断是否主链地址
            let isMainnetAdd = manager.isMainnetAddress(getCashAddressFromMen.object);
            console.log(`地址为 ${getCashAddressFromMen.object} 是否为主链地址 ${isMainnetAdd.object}`);

            //最低矿工费
            let minerFee = manager.getMinMinerFee();
            console.log("最低矿工费为：" + minerFee.object);

            let sendAddress = "bchtest:qzaahxursqzjlw5uvumdpd79t2ne9zskyumeyzd69s";
            let sendMne = "copy target urge such ice spatial near sheriff cycle dog file twenty";
            let sendWif = "cQ1wkMY3zTpMq6DVSjH2q2naHBrh7vHqjayfibXiVd3Za4MMBsjg";
            let sendAmount = 0.00001;
            let receiveAddress = "bchtest:qqczttf6zdu33ymqehy27rz4ke0q9w9kkgartd80ly";

            //获取余额
            manager.getBalance(sendAddress).then(
                result => {
                    console.log(JSON.stringify(result.object));
                }
            );

            //测试交易
            /**
             * 创建交易
             *
             * @param {sendAddress} 发送地址
             * @param {sendMne} 发送方的助记词 与私钥2选1
             * @param {sendWif} 发送方的私钥 与助记词2选1
             * @param {sendAmount} 发送的数量
             * @param {receiveAddress} 接收地址
             * @param {minerFee} 矿工费
             * @returns
             */


            //用助记词交易
            // manager.trans(sendAddress, sendMne, "", sendAmount, receiveAddress, 0).then(

            //     result => {
            //         console.log(JSON.stringify(result.object));
            //     }
            // );

            //用私钥交易
            // manager.trans(sendAddress, "", sendWif, sendAmount, receiveAddress, 0).then(

            //     result => {
            //         console.log(JSON.stringify(result.object));
            //     }
            // );
        }


        function liteCoinTest() {
            let litecore = require("litecore-lib");
            var privateKey = new litecore.PrivateKey("testnet");
            let wif = privateKey.toWIF();
            console.log(wif);

            var address = privateKey.toAddress("testnet");
            let addressStr = address.toString();
            console.log(addressStr);

            // var privateKey = new litecore.PrivateKey();
            // let wif = privateKey.toWIF();
            // console.log(wif);

            // let privateKey2 = new litecore.PrivateKey(wif);
            // let wif2 = privateKey2.toWIF();
            // console.log(wif2);

            // var address = privateKey.toAddress("testnet");
            // let addressStr = address.toString();
            // console.log(addressStr);

            // var mainAddress = privateKey.toAddress("mainnet")
            // let mainAddressStr = mainAddress.toString();
            // console.log(mainAddressStr);

            // let publicKey = privateKey.toPublicKey();
            // let publickKeyString = publicKey.toString();
            // console.log(publickKeyString);

            // var manager = new liteCoinManager();
            // let address = manager.getAddressFromWif("T35kTom9ogSqHFx6jgxQmc8xVPECpfTYdgyWUnmirdAkK5At9TZw");
            // console.log(`address is ${address.object}`);

            // let wifIsValid = manager.isWifValid("T35kTom9ogSqHFx6jgxQmc8xVPECpfTYdgyWUnmirdAkK5At9TZw");
            // console.log(`wif Valid ${wifIsValid.object}`);

            // let addressIsValid = manager.isAddressValid("mwmKih47dV9HhHAVXaaedqYWqWyDy9n");
            // console.log(`address Valid ${addressIsValid.object}`);
        }

        function createWallet(params) {
            var manager = new WalletCreateManager();
            var words = manager.generate();

            var obj = JSON.parse(params)
            var manager = new WalletCreateManager();
            var addressObj = manager.address(words, obj.pass, obj.coinType);
            var result = {
                "words": words,
                "address": addressObj["address"],
                "pubkey": addressObj["pubkey"],
                "privkey": addressObj["privkey"]
            }
            return result
        }

        $("#button").on("click", generateClicked);
        $("#ripple").on("click", rippleTest);
        $("#bitCore").on("click", bchTest);
        $("#liteCore").on("click", liteCoinTest);
    </script>
</body>

</html>